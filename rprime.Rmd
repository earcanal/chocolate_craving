---
title: 'Meditation: effects? mechanisms?'
author: "Paul Sharpe (PhD Psychology, Year 1)"
date: "12th December, 2016"
output:
  slidy_presentation:
    incremental: yes
    fig_caption: yes
    fig_height: 4
    fig_width: 4
    fonttheme: structurebold
    css: style.css
---

```{r setup, include=FALSE}
library(knitr)
opts_chunk$set(dev = 'pdf')
opts_chunk$set(fig.align='center')
```

# Mindfulness Meditation

# Buddhist and Cognitive Psychology 

- 2nd noble truth:Craving -> Suffering
- Meditation < craving
- Smoking addiction (operant conditioning) (Brewer, Elwafi, & Davis, 2013)

# Dependent Origination

![dependent origination](dependent_origination.png)

# Brewer's "craving hypothesis"

![Reducing craving is the key to breaking the loop](addiction_loop.png)

- hard to avoid all cues
- substitute behaviours (e.g. exercise, relaxation) not always available

# Elwafi, Witkiewitz, Mallik, Thornhill, & Brewer (2013)

![RCT; ](elwafi_et_al.png)

- 8 sessions of "urge surfing" over 4 weeks
- abstainers reported lower levels of cravings (mean range = 1.41–1.52)
- non-abstainers reported higher levels of craving (mean range = 2.09–2.49)
- positive associations between craving and number of cigarettes smoked (range r = 0.31–0.82)

# Craving Chocolate: Experiment

![Method](method.png)

# Craving Chocolate: Results

# Discussion

![Elwafi et al. (2013)](elwafi_et_al.png)

- Craving reduction delayed


```{r echo=FALSE}
library("rprime")
library("plyr")

setwd("/home/paul/src/R/phd/craving_chocolate")

# arg, have to understand ePrime data internals :(
process_eprime_file <- function(path) {
  lines  <- read_eprime(path)
  frames <- FrameList(lines)
  
  # trials occur at level 3
  frames <- keep_levels(frames, 3)
  df     <- to_data_frame(frames)
  
  # FIXME: get fields we're interested in?
  # FIXME: Not all trials have all fields
  to_pick <- c("Eprime.Basename", "Running", "Item", "response", "Choice")
  df <- df[to_pick]
  # running_map <- c(TrialLists = "Trial", PracticeBlock = "Practice")
  # df$Running <- running_map[df$Running]
  
  # Renumber trials in the practice and experimental blocks separately.
  # Numerically code correct response.
  # df <- ddply(df, .(Running), mutate, 
  #                TrialNumber = seq(from = 1, to = length(Running)),
  #                CorrectResponse = ifelse(Correct == Response, 1, 0))
  df$Sample <- NULL
  
  # Save to CSV
  # csv <- paste0(file_path_sans_ext(sails_path), ".csv")
  # write.csv(df, csv, row.names = FALSE)
  df
}


paths <- list.files("data", pattern = ".txt", full.names = TRUE)
paths
paths <- c("data/101-1.txt")
#paths
ensemble <- ldply(paths, process_eprime_file)
# overall <- ddply(ensemble, .(Eprime.Basename, Running), summarise, 
#                  Score = sum(CorrectResponse),
#                  PropCorrect = Score / length(CorrectResponse))
# overall
# 
# modules <- ddply(ensemble, .(Eprime.Basename, Running, Module), summarise, 
#                  Score = sum(CorrectResponse),
#                  PropCorrect = mean(CorrectResponse))
# modules
```